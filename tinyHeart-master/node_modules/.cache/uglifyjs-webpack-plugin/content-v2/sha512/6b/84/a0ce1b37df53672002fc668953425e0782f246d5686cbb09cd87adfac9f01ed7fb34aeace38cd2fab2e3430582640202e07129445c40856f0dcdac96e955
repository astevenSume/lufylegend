{"code":"!function(t){var i={};function e(r){if(i[r])return i[r].exports;var s=i[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,e),s.l=!0,s.exports}e.m=t,e.c=i,e.d=function(t,i,r){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:r})},e.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&\"object\"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:t}),2&i&&\"string\"!=typeof t)for(var s in t)e.d(r,s,function(i){return t[i]}.bind(null,s));return r},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,\"a\",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p=\"\",e(e.s=0)}([function(t,i){!function(){var t,i,e,r,s,a,n,o,h,m,y,d,u,l,b,f,c,p=\"http://7xtawy.com1.z0.glb.clouddn.com/tinyheart\",g=0;window.jzk={},jzk.startgame=function(){jzk.init(),n=Date.now(),jzk.gameLoop()},jzk.init=function(){t=document.getElementById(\"canvas1\"),e=t.getContext(\"2d\"),i=document.getElementById(\"canvas2\"),r=i.getContext(\"2d\"),e.fillStyle=\"white\",e.font=\"20px 微软雅黑\",e.textAlign=\"center\",t.addEventListener(\"mousemove\",jzk.onMouseMove,!1),t.addEventListener(\"click\",jzk.onClick,!1),s=t.width,a=t.height,b=.5*s,f=.5*a,(o=new x).init(),(h=new v).init(),(m=new w).init(),(y=new I).init(),d=new T,(u=new E).init(),(l=new A).init(),(c=new B).init()},jzk.gameLoop=function(){requestAnimFrame(jzk.gameLoop);var t=Date.now();g=t-n,n=t,g>40&&(g=40),r.clearRect(0,0,s,a),can2App.drawBackgorund(),o.drawAne(),function(){for(var t=0,i=0;i<h.num;i++)h.alive[i]&&t++;if(t<15)(function(){for(var t=0;t<h.num;t++)if(!h.alive[t])return h.born(t),!1})()}(),h.drawFruit(),e.clearRect(0,0,s,a),m.drawMom(),y.drawBaby(),d.gameOver||(jzk.momEatFruit(),jzk.momFoodBaby()),d.drawScore(),u.drawWave(),l.drawHalo(),c.drawDust()},jzk.onMouseMove=function(t){d.gameOver||(t.offsetX||t.layerX)&&(b=void 0==t.offsetX?t.layerX:t.offsetX,f=void 0==t.offsetY?t.layerY:t.offsetY)},jzk.onClick=function(){d.gameOver&&(d.gameOver=!1,h.init(),m.init(),y.init(),d.init())},jzk.momEatFruit=function(){for(var t=0;t<h.num;t++){if(h.alive[t]&&h.grow[t])calLength2(h.x[t],h.y[t],m.x,m.y)<30&&(h.dead(t),u.born(t),d.fruitNum++,m.momBodyIndex=7==m.momBodyIndex?m.momBodyIndex:m.momBodyIndex+1,\"blue\"==h.type[t]&&d.doubleNum++)}},jzk.momFoodBaby=function(){if(d.fruitNum>0&&calLength2(m.x,m.y,y.x,y.y)<30){l.born(),m.momBodyIndex=0;var t=d.doubleNum*d.fruitNum,i=y.babyBodyIndex-t;i<0&&(i=0);var e=d.strength+(i/2).toFixed(0);e>10&&(e=10),d.strength=e,y.babyBodyIndex=i,d.computeScore()}},window.can2App={},can2App.drawBackgorund=function(){var t=new Image;t.src=p+\"background.jpg\",r.drawImage(t,0,0,s,a)};var x=function(){this.num=50,this.rootx=[],this.headx=[],this.heady=[],this.amp=[],this.beta=0};x.prototype.init=function(){for(var t=0;t<this.num;t++)this.rootx[t]=18*t+30*Math.random(),this.headx[t]=this.rootx[t],this.heady[t]=a-220+50*Math.random(),this.amp[t]=50*Math.random()+60},x.prototype.drawAne=function(){this.beta+=8e-4*g;var t=Math.sin(this.beta);r.save(),r.globalAlpha=.7,r.lineWidth=20,r.lineCap=\"round\",r.strokeStyle=\"#3b154e\";for(var i=0;i<this.num;i++){var e=this.headx[i]+t*this.amp[i];r.beginPath(),r.moveTo(this.rootx[i],a),r.quadraticCurveTo(this.rootx[i],a-100,e,this.heady[i]),r.stroke()}r.restore()};var v=function(){this.num=30,this.x=[],this.y=[],this.size=[],this.type=[],this.speed=[],this.grow=[],this.alive=[],this.orange=new Image,this.blue=new Image};v.prototype.init=function(){this.orange.src=p+\"fruit.png\",this.blue.src=p+\"blue.png\";for(var t=0;t<this.num;t++)this.x[t]=this.y[t]=0,this.speed[t]=.015*Math.random()+.005,this.alive[t]=!1,this.grow[t]=!1,this.type[t]=\"\"},v.prototype.drawFruit=function(){for(var t=0;t<this.num;t++)if(this.alive[t]){this.size[t]<=16?(this.grow[t]=!1,this.size[t]+=this.speed[t]*g*.8):(this.grow[t]=!0,this.y[t]-=5*this.speed[t]*g);var i=this.orange;\"blue\"==this.type[t]&&(i=this.blue),r.drawImage(i,this.x[t]-.5*this.size[t],this.y[t]-.5*this.size[t],this.size[t],this.size[t]),this.y[t]<8&&(this.alive[t]=!1)}},v.prototype.born=function(t){var i=Math.floor(Math.random()*o.num);this.x[t]=o.headx[i],this.y[t]=o.heady[i],this.size[t]=0,this.alive[t]=!0;var e=Math.random();this.type[t]=e<.1?\"blue\":\"orange\"},v.prototype.dead=function(t){this.alive[t]=!1},window.can1App={};var w=function(){this.x=0,this.y=0,this.angle,this.momTailArr=[],this.momTailTimer=0,this.momTailIndex=0,this.momEyeArr=[],this.momEyeTimer=0,this.momEyeIndex=0,this.momEyeInterval=1e3,this.momOrangeArr=[],this.momBlueArr=[],this.momBodyIndex=0};w.prototype.init=function(){this.x=.5*s,this.y=.5*a,this.angle=0;for(var t=0;t<8;t++)this.momTailArr[t]=new Image,this.momTailArr[t].src=p+\"bigTail\"+t+\".png\";for(t=0;t<2;t++)this.momEyeArr[t]=new Image,this.momEyeArr[t].src=p+\"bigEye\"+t+\".png\";for(t=0;t<8;t++)this.momOrangeArr[t]=new Image,this.momOrangeArr[t].src=p+\"bigSwim\"+t+\".png\",this.momBlueArr[t]=new Image,this.momBlueArr[t].src=p+\"bigSwimBlue\"+t+\".png\"},w.prototype.drawMom=function(){this.x=lerpDistance(b,this.x,.96),this.y=lerpDistance(f,this.y,.98);var t=b-this.x,i=f-this.y,r=Math.atan2(i,t)+Math.PI;this.angle=lerpAngle(r,this.angle,.6),this.momTailTimer+=g,this.momTailTimer>50&&(this.momTailIndex=(this.momTailIndex+1)%8,this.momTailTimer%=50),this.momEyeTimer+=g,this.momEyeTimer>this.momEyeInterval&&(this.momEyeIndex=(this.momEyeIndex+1)%2,this.momEyeTimer%=this.momEyeInterval,0==this.momEyeIndex?this.momEyeInterval=1500*Math.random()+1500:this.momEyeInterval=200),e.save(),e.translate(this.x,this.y),e.rotate(this.angle);var s,a=this.momTailArr[this.momTailIndex];e.drawImage(a,.5*-a.width+30,.5*-a.height),s=1!=d.doubleNum?this.momBlueArr[this.momBodyIndex]:this.momOrangeArr[this.momBodyIndex],e.drawImage(s,.5*-s.width,.5*-s.height);var n=this.momEyeArr[this.momEyeIndex];e.drawImage(n,.5*-n.width,.5*-n.height),e.restore()};var I=function(){this.x=0,this.y=0,this.angle,this.babyTailArr=[],this.babyTailTimer=0,this.babyTailIndex=0,this.babyEyeArr=[],this.babyEyeTimer=0,this.babyEyeIndex=0,this.babyEyeInterval=1e3,this.babyBodyArr=[],this.babyBodyTimer=0,this.babyBodyIndex=0};I.prototype.init=function(){this.x=.5*s-50,this.y=.5*a+50,this.babyBodyIndex=0,this.angle=0;for(var t=0;t<8;t++)this.babyTailArr[t]=new Image,this.babyTailArr[t].src=p+\"babyTail\"+t+\".png\";for(t=0;t<2;t++)this.babyEyeArr[t]=new Image,this.babyEyeArr[t].src=p+\"babyEye\"+t+\".png\";for(t=0;t<20;t++)this.babyBodyArr[t]=new Image,this.babyBodyArr[t].src=p+\"babyFade\"+t+\".png\"},I.prototype.drawBaby=function(){this.x=lerpDistance(m.x,this.x,.98),this.y=lerpDistance(m.y,this.y,.99);var i=m.x-this.x,r=m.y-this.y,s=Math.atan2(r,i)+Math.PI;this.angle=lerpAngle(s,this.angle,.6),this.babyTailTimer+=g,this.babyTailTimer>50&&(this.babyTailIndex=(this.babyTailIndex+1)%8,this.babyTailTimer%=50),this.babyEyeTimer+=g,this.babyEyeTimer>this.babyEyeInterval&&(this.babyEyeIndex=(this.babyEyeIndex+1)%2,this.babyEyeTimer%=this.babyEyeInterval,0==this.babyEyeIndex?this.babyEyeInterval=1500*Math.random()+1500:this.babyEyeInterval=200),this.babyBodyTimer+=g,this.babyBodyTimer>550&&(this.babyBodyIndex+=1,this.babyBodyTimer%=550,d.strength=((20-this.babyBodyIndex)/2).toFixed(0),this.babyBodyIndex>19&&(this.babyBodyIndex=19,d.gameOver=!0,t.style.cursor=\"pointer\")),e.save(),e.translate(this.x,this.y),e.rotate(this.angle);var a=this.babyTailArr[this.babyTailIndex];e.drawImage(a,.5*-a.width+24,.5*-a.height);var n=this.babyBodyArr[this.babyBodyIndex];e.drawImage(n,.5*-n.width,.5*-n.height);var o=this.babyEyeArr[this.babyEyeIndex];e.drawImage(o,.5*-o.width,.5*-o.height),e.restore()};var T=function(){this.fruitNum=0,this.doubleNum=1,this.score=0,this.strength=10,this.alpha=0,this.gameOver=!1};T.prototype.init=function(){this.fruitNum=0,this.doubleNum=1,this.score=0},T.prototype.drawScore=function(){e.fillText(\"num: \"+this.fruitNum,.5*s,a-30),e.fillText(\"double: \"+this.doubleNum,.5*s,a-70),e.save(),e.font=\"30px verdana\",e.fillText(\"SCORE: \"+this.score,.5*s,50),e.font=\"20px verdana\",e.fillText(\"strength: \",650,45),d.strength<=3&&(e.fillStyle=\"red\"),e.fillText(d.strength,710,45),d.gameOver&&(this.alpha+=5e-4*g,this.alpha>1&&(this.alpha=1),e.font=\"40px verdana\",e.shadowBlur=10,e.shadowColor=\"white\",e.fillStyle=\"rgba(255, 255, 255, \"+this.alpha+\")\",e.fillText(\"GAME OVER\",.5*s,.5*a-25),e.save(),e.font=\"25px verdana\",e.fillText(\"CLICK TO RESTART\",.5*s,.5*a+25),e.restore()),e.restore()},T.prototype.computeScore=function(){d.score+=d.fruitNum*d.doubleNum,this.fruitNum=0,this.doubleNum=1};var E=function(){this.num=10,this.x=[],this.y=[],this.r=[],this.status=[]};E.prototype.init=function(){for(var t=0;t<this.num;t++)this.x[t]=.5*s,this.y[t]=.5*a,this.status[t]=!1,this.r[t]=0},E.prototype.drawWave=function(){e.save(),e.lineWidth=3;for(var t=0;t<this.num;t++)if(this.status[t]){if(this.r[t]+=.04*g,this.r[t]>60)return this.status[t]=!1,!1;var i=1-this.r[t]/60;e.strokeStyle=\"rgba(255, 255, 255, \"+i+\")\",e.beginPath(),e.arc(this.x[t],this.y[t],this.r[t],0,2*Math.PI),e.stroke()}e.restore()},E.prototype.born=function(t){for(var i=0;i<this.num;i++)if(!this.status[i])return this.status[i]=!0,this.x[i]=h.x[t],this.y[i]=h.y[t],this.r[i]=10,!1};var A=function(){this.num=5,this.x=[],this.y=[],this.r=[],this.status=[]};A.prototype.init=function(){for(var t=0;t<this.num;t++)this.x[t]=.5*s,this.y[t]=.5*a,this.status[t]=!1,this.r[t]=0},A.prototype.drawHalo=function(){e.save(),e.lineWidth=4;for(var t=0;t<this.num;t++)if(this.status[t]){if(this.r[t]+=.08*g,this.r[t]>100)return this.status[t]=!1,!1;var i=1-this.r[t]/100;e.strokeStyle=\"rgba(203, 91, 0, \"+i+\")\",e.beginPath(),e.arc(this.x[t],this.y[t],this.r[t],0,2*Math.PI),e.stroke()}e.restore()},A.prototype.born=function(){for(var t=0;t<this.num;t++)if(!this.status[t])return this.status[t]=!0,this.x[t]=y.x,this.y[t]=y.y,this.r[t]=10,!1};var B=function(){this.num=30,this.dustPic=[],this.x=[],this.y=[],this.amp=[],this.index=[],this.beta=0};B.prototype.init=function(){for(var t=0;t<7;t++)this.dustPic[t]=new Image,this.dustPic[t].src=p+\"dust\"+t+\".png\";for(t=0;t<this.num;t++)this.x[t]=Math.random()*s,this.y[t]=Math.random()*a,this.amp=20+Math.random()+15,this.index[t]=Math.floor(7*Math.random())},B.prototype.drawDust=function(){for(var t=0;t<this.num;t++){var i=this.index[t];e.drawImage(this.dustPic[i],this.x,this.y)}}}()}]);","extractedComments":[]}