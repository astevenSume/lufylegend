{"code":"!function(t){var i={};function e(r){if(i[r])return i[r].exports;var a=i[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}e.m=t,e.c=i,e.d=function(t,i,r){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:r})},e.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&\"object\"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:t}),2&i&&\"string\"!=typeof t)for(var a in t)e.d(r,a,function(i){return t[i]}.bind(null,a));return r},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,\"a\",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p=\"\",e(e.s=0)}([function(t,i,e){\"use strict\";e.r(i);e(1),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,i){return window.setTimeout(t,1e3/60)};function r(t,i,e,r){return Math.sqrt(Math.pow(t-e,2)+Math.pow(i-r,2))}function a(t,i,e){var r=i-t;return r>Math.PI&&(r-=2*Math.PI),r<-Math.PI&&(r+=2*Math.PI),t+r*e}function s(t,i,e){return t+(i-t)*e}!function(){var t,i,e,n,o,h,m,y,u,d,l,b,f,c,p,g,x,v=\"http://7xtawy.com1.z0.glb.clouddn.com/tinyheart\",w=0;window.jzk={},jzk.startgame=function(){jzk.init(),m=Date.now(),jzk.gameLoop()},jzk.init=function(){t=document.getElementById(\"canvas1\"),e=t.getContext(\"2d\"),i=document.getElementById(\"canvas2\"),n=i.getContext(\"2d\"),e.fillStyle=\"white\",e.font=\"20px 微软雅黑\",e.textAlign=\"center\",t.addEventListener(\"mousemove\",jzk.onMouseMove,!1),t.addEventListener(\"click\",jzk.onClick,!1),o=t.width,h=t.height,p=.5*o,g=.5*h,(y=new I).init(),(u=new T).init(),(d=new E).init(),(l=new A).init(),b=new B,(f=new M).init(),(c=new k).init(),(x=new z).init()},jzk.gameLoop=function(){var t=Date.now();w=t-m,m=t,w>40&&(w=40),n.clearRect(0,0,o,h),can2App.drawBackgorund(),y.drawAne(),function(){for(var t=0,i=0;i<u.num;i++)u.alive[i]&&t++;if(t<15)(function(){for(var t=0;t<u.num;t++)if(!u.alive[t])return u.born(t),!1})()}(),u.drawFruit(),e.clearRect(0,0,o,h),d.drawMom(),l.drawBaby(),b.gameOver||(jzk.momEatFruit(),jzk.momFoodBaby()),b.drawScore(),f.drawWave(),c.drawHalo(),x.drawDust()},jzk.onMouseMove=function(t){b.gameOver||(t.offsetX||t.layerX)&&(p=void 0==t.offsetX?t.layerX:t.offsetX,g=void 0==t.offsetY?t.layerY:t.offsetY)},jzk.onClick=function(){b.gameOver&&(b.gameOver=!1,u.init(),d.init(),l.init(),b.init())},jzk.momEatFruit=function(){for(var t=0;t<u.num;t++){if(u.alive[t]&&u.grow[t])r(u.x[t],u.y[t],d.x,d.y)<30&&(u.dead(t),f.born(t),b.fruitNum++,d.momBodyIndex=7==d.momBodyIndex?d.momBodyIndex:d.momBodyIndex+1,\"blue\"==u.type[t]&&b.doubleNum++)}},jzk.momFoodBaby=function(){if(b.fruitNum>0&&r(d.x,d.y,l.x,l.y)<30){c.born(),d.momBodyIndex=0;var t=b.doubleNum*b.fruitNum,i=l.babyBodyIndex-t;i<0&&(i=0);var e=b.strength+(i/2).toFixed(0);e>10&&(e=10),b.strength=e,l.babyBodyIndex=i,b.computeScore()}},window.can2App={},can2App.drawBackgorund=function(){var t=new Image;t.src=v+\"background.jpg\",n.drawImage(t,0,0,o,h)};var I=function(){this.num=50,this.rootx=[],this.headx=[],this.heady=[],this.amp=[],this.beta=0};I.prototype.init=function(){for(var t=0;t<this.num;t++)this.rootx[t]=18*t+30*Math.random(),this.headx[t]=this.rootx[t],this.heady[t]=h-220+50*Math.random(),this.amp[t]=50*Math.random()+60},I.prototype.drawAne=function(){this.beta+=8e-4*w;var t=Math.sin(this.beta);n.save(),n.globalAlpha=.7,n.lineWidth=20,n.lineCap=\"round\",n.strokeStyle=\"#3b154e\";for(var i=0;i<this.num;i++){var e=this.headx[i]+t*this.amp[i];n.beginPath(),n.moveTo(this.rootx[i],h),n.quadraticCurveTo(this.rootx[i],h-100,e,this.heady[i]),n.stroke()}n.restore()};var T=function(){this.num=30,this.x=[],this.y=[],this.size=[],this.type=[],this.speed=[],this.grow=[],this.alive=[],this.orange=new Image,this.blue=new Image};T.prototype.init=function(){this.orange.src=v+\"fruit.png\",this.blue.src=v+\"blue.png\";for(var t=0;t<this.num;t++)this.x[t]=this.y[t]=0,this.speed[t]=.015*Math.random()+.005,this.alive[t]=!1,this.grow[t]=!1,this.type[t]=\"\"},T.prototype.drawFruit=function(){for(var t=0;t<this.num;t++)if(this.alive[t]){this.size[t]<=16?(this.grow[t]=!1,this.size[t]+=this.speed[t]*w*.8):(this.grow[t]=!0,this.y[t]-=5*this.speed[t]*w);var i=this.orange;\"blue\"==this.type[t]&&(i=this.blue),n.drawImage(i,this.x[t]-.5*this.size[t],this.y[t]-.5*this.size[t],this.size[t],this.size[t]),this.y[t]<8&&(this.alive[t]=!1)}},T.prototype.born=function(t){var i=Math.floor(Math.random()*y.num);this.x[t]=y.headx[i],this.y[t]=y.heady[i],this.size[t]=0,this.alive[t]=!0;var e=Math.random();this.type[t]=e<.1?\"blue\":\"orange\"},T.prototype.dead=function(t){this.alive[t]=!1},window.can1App={};var E=function(){this.x=0,this.y=0,this.angle,this.momTailArr=[],this.momTailTimer=0,this.momTailIndex=0,this.momEyeArr=[],this.momEyeTimer=0,this.momEyeIndex=0,this.momEyeInterval=1e3,this.momOrangeArr=[],this.momBlueArr=[],this.momBodyIndex=0};E.prototype.init=function(){this.x=.5*o,this.y=.5*h,this.angle=0;for(var t=0;t<8;t++)this.momTailArr[t]=new Image,this.momTailArr[t].src=v+\"bigTail\"+t+\".png\";for(t=0;t<2;t++)this.momEyeArr[t]=new Image,this.momEyeArr[t].src=v+\"bigEye\"+t+\".png\";for(t=0;t<8;t++)this.momOrangeArr[t]=new Image,this.momOrangeArr[t].src=v+\"bigSwim\"+t+\".png\",this.momBlueArr[t]=new Image,this.momBlueArr[t].src=v+\"bigSwimBlue\"+t+\".png\"},E.prototype.drawMom=function(){this.x=s(p,this.x,.96),this.y=s(g,this.y,.98);var t=p-this.x,i=g-this.y,r=Math.atan2(i,t)+Math.PI;this.angle=a(r,this.angle,.6),this.momTailTimer+=w,this.momTailTimer>50&&(this.momTailIndex=(this.momTailIndex+1)%8,this.momTailTimer%=50),this.momEyeTimer+=w,this.momEyeTimer>this.momEyeInterval&&(this.momEyeIndex=(this.momEyeIndex+1)%2,this.momEyeTimer%=this.momEyeInterval,0==this.momEyeIndex?this.momEyeInterval=1500*Math.random()+1500:this.momEyeInterval=200),e.save(),e.translate(this.x,this.y),e.rotate(this.angle);var n,o=this.momTailArr[this.momTailIndex];e.drawImage(o,.5*-o.width+30,.5*-o.height),n=1!=b.doubleNum?this.momBlueArr[this.momBodyIndex]:this.momOrangeArr[this.momBodyIndex],e.drawImage(n,.5*-n.width,.5*-n.height);var h=this.momEyeArr[this.momEyeIndex];e.drawImage(h,.5*-h.width,.5*-h.height),e.restore()};var A=function(){this.x=0,this.y=0,this.angle,this.babyTailArr=[],this.babyTailTimer=0,this.babyTailIndex=0,this.babyEyeArr=[],this.babyEyeTimer=0,this.babyEyeIndex=0,this.babyEyeInterval=1e3,this.babyBodyArr=[],this.babyBodyTimer=0,this.babyBodyIndex=0};A.prototype.init=function(){this.x=.5*o-50,this.y=.5*h+50,this.babyBodyIndex=0,this.angle=0;for(var t=0;t<8;t++)this.babyTailArr[t]=new Image,this.babyTailArr[t].src=v+\"babyTail\"+t+\".png\";for(t=0;t<2;t++)this.babyEyeArr[t]=new Image,this.babyEyeArr[t].src=v+\"babyEye\"+t+\".png\";for(t=0;t<20;t++)this.babyBodyArr[t]=new Image,this.babyBodyArr[t].src=v+\"babyFade\"+t+\".png\"},A.prototype.drawBaby=function(){this.x=s(d.x,this.x,.98),this.y=s(d.y,this.y,.99);var i=d.x-this.x,r=d.y-this.y,n=Math.atan2(r,i)+Math.PI;this.angle=a(n,this.angle,.6),this.babyTailTimer+=w,this.babyTailTimer>50&&(this.babyTailIndex=(this.babyTailIndex+1)%8,this.babyTailTimer%=50),this.babyEyeTimer+=w,this.babyEyeTimer>this.babyEyeInterval&&(this.babyEyeIndex=(this.babyEyeIndex+1)%2,this.babyEyeTimer%=this.babyEyeInterval,0==this.babyEyeIndex?this.babyEyeInterval=1500*Math.random()+1500:this.babyEyeInterval=200),this.babyBodyTimer+=w,this.babyBodyTimer>550&&(this.babyBodyIndex+=1,this.babyBodyTimer%=550,b.strength=((20-this.babyBodyIndex)/2).toFixed(0),this.babyBodyIndex>19&&(this.babyBodyIndex=19,b.gameOver=!0,t.style.cursor=\"pointer\")),e.save(),e.translate(this.x,this.y),e.rotate(this.angle);var o=this.babyTailArr[this.babyTailIndex];e.drawImage(o,.5*-o.width+24,.5*-o.height);var h=this.babyBodyArr[this.babyBodyIndex];e.drawImage(h,.5*-h.width,.5*-h.height);var m=this.babyEyeArr[this.babyEyeIndex];e.drawImage(m,.5*-m.width,.5*-m.height),e.restore()};var B=function(){this.fruitNum=0,this.doubleNum=1,this.score=0,this.strength=10,this.alpha=0,this.gameOver=!1};B.prototype.init=function(){this.fruitNum=0,this.doubleNum=1,this.score=0},B.prototype.drawScore=function(){e.fillText(\"num: \"+this.fruitNum,.5*o,h-30),e.fillText(\"double: \"+this.doubleNum,.5*o,h-70),e.save(),e.font=\"30px verdana\",e.fillText(\"SCORE: \"+this.score,.5*o,50),e.font=\"20px verdana\",e.fillText(\"strength: \",650,45),b.strength<=3&&(e.fillStyle=\"red\"),e.fillText(b.strength,710,45),b.gameOver&&(this.alpha+=5e-4*w,this.alpha>1&&(this.alpha=1),e.font=\"40px verdana\",e.shadowBlur=10,e.shadowColor=\"white\",e.fillStyle=\"rgba(255, 255, 255, \"+this.alpha+\")\",e.fillText(\"GAME OVER\",.5*o,.5*h-25),e.save(),e.font=\"25px verdana\",e.fillText(\"CLICK TO RESTART\",.5*o,.5*h+25),e.restore()),e.restore()},B.prototype.computeScore=function(){b.score+=b.fruitNum*b.doubleNum,this.fruitNum=0,this.doubleNum=1};var M=function(){this.num=10,this.x=[],this.y=[],this.r=[],this.status=[]};M.prototype.init=function(){for(var t=0;t<this.num;t++)this.x[t]=.5*o,this.y[t]=.5*h,this.status[t]=!1,this.r[t]=0},M.prototype.drawWave=function(){e.save(),e.lineWidth=3;for(var t=0;t<this.num;t++)if(this.status[t]){if(this.r[t]+=.04*w,this.r[t]>60)return this.status[t]=!1,!1;var i=1-this.r[t]/60;e.strokeStyle=\"rgba(255, 255, 255, \"+i+\")\",e.beginPath(),e.arc(this.x[t],this.y[t],this.r[t],0,2*Math.PI),e.stroke()}e.restore()},M.prototype.born=function(t){for(var i=0;i<this.num;i++)if(!this.status[i])return this.status[i]=!0,this.x[i]=u.x[t],this.y[i]=u.y[t],this.r[i]=10,!1};var k=function(){this.num=5,this.x=[],this.y=[],this.r=[],this.status=[]};k.prototype.init=function(){for(var t=0;t<this.num;t++)this.x[t]=.5*o,this.y[t]=.5*h,this.status[t]=!1,this.r[t]=0},k.prototype.drawHalo=function(){e.save(),e.lineWidth=4;for(var t=0;t<this.num;t++)if(this.status[t]){if(this.r[t]+=.08*w,this.r[t]>100)return this.status[t]=!1,!1;var i=1-this.r[t]/100;e.strokeStyle=\"rgba(203, 91, 0, \"+i+\")\",e.beginPath(),e.arc(this.x[t],this.y[t],this.r[t],0,2*Math.PI),e.stroke()}e.restore()},k.prototype.born=function(){for(var t=0;t<this.num;t++)if(!this.status[t])return this.status[t]=!0,this.x[t]=l.x,this.y[t]=l.y,this.r[t]=10,!1};var z=function(){this.num=30,this.dustPic=[],this.x=[],this.y=[],this.amp=[],this.index=[],this.beta=0};z.prototype.init=function(){for(var t=0;t<7;t++)this.dustPic[t]=new Image,this.dustPic[t].src=v+\"dust\"+t+\".png\";for(t=0;t<this.num;t++)this.x[t]=Math.random()*o,this.y[t]=Math.random()*h,this.amp=20+Math.random()+15,this.index[t]=Math.floor(7*Math.random())},z.prototype.drawDust=function(){for(var t=0;t<this.num;t++){var i=this.index[t];e.drawImage(this.dustPic[i],this.x,this.y)}}}(),jzk.startgame()},function(t,i){}]);","extractedComments":[]}